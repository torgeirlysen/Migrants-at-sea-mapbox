<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Migrants at Sea — Map</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="icon" type="image/x-icon"
        href="https://raw.githubusercontent.com/mapbox/assembly/publisher-staging/src/svgs/mapbox.svg">
    <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.js"></script>
    <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/mapbox-gl-globe-minimap@1.2.0/dist/bundle.js"></script>
    <style>
                
        #topnav {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 10;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 10px 0;
            backdrop-filter: blur(6px);
        }

        #topnav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            gap: 40px;
        }

        #topnav a {
            color: white;
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
        }

        #topnav a:hover {
            text-decoration: underline;
        }

        /* Push Mapbox controls below the fixed top navbar */
        .mapboxgl-ctrl-top-right,
        .mapboxgl-ctrl-top-left {
            top: 70px !important; /* tweak if navbar height changes */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
        }

        a,
        a:hover,
        a:visited {
            color: #0071bc;
        }

        #navbar {
            position: relative;
            z-index: 11;
        }

        #map {
            position: fixed;
            inset: 0;
            z-index: 0;
        }

        /* --- Home page story/info card (mirrors case pages) --- */
        #story {
            position: relative;
            z-index: 5;
            pointer-events: none; /* allow map interaction except inside the card */
        }

        #features {
            padding-top: 90px; /* below navbar */
            padding-bottom: 0;
        }

        .centered {
            width: 50vw;
            margin: 0 auto;
        }

        .lefty {
            width: 33vw;
            margin-left: 5vw;
            margin-top: 0; /* home shouldn’t push it far down */
        }

        .light {
            color: #444;
            background-color: #fafafa;
        }

        .dark {
            color: #fafafa;
            background-color: #444;
        }

        .step {
            padding-bottom: 0; /* home: no scroll story */
            opacity: 0.95;
        }

        .step div {
            padding: 25px 50px;
            line-height: 25px;
            font-size: 13px;
            border-radius: 8px;
            pointer-events: auto; /* clickable links inside card */
        }

        /* Long home intro text: keep it readable on smaller screens */
        #home-info .dark {
            background-color: rgba(68, 68, 68, 0.85); /* slightly more transparent than case pages */
            max-height: calc(100vh - 210px); /* navbar + footer breathing room */
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* --- Footer style matching the case pages (but fixed to bottom on Home) --- */
        #footer {
            width: 100%;
            min-height: 5vh;
            padding-top: 2vh;
            padding-bottom: 2vh;
            text-align: center;
            line-height: 25px;
            font-size: 13px;
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 5;
            pointer-events: none; /* don't block map; links re-enable below */
        }

        #footer a {
            pointer-events: auto;
        }

        /* Slight transparency for the home footer panel */
        #footer.dark {
            background-color: rgba(68, 68, 68, 0.85);
        }

        @media (max-width: 750px) {
            .centered,
            .lefty {
                width: 90vw;
                margin: 0 auto;
                margin-top: 0;
            }
        }

        /* --- Map legend (Home) --- */
        .map-legend {
            position: fixed;
            left: 14px;
            bottom: 92px; /* keep clear of fixed footer */
            z-index: 6;
            pointer-events: auto;
            color: #fafafa;
            background: rgba(68, 68, 68, 0.85);
            backdrop-filter: blur(6px);
            border-radius: 10px;
            padding: 10px 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.35);
            max-width: min(380px, calc(100vw - 28px));
            font-size: 13px;
            line-height: 18px;
        }

        .map-legend-title {
            font-weight: 700;
            margin: 0 0 8px 0;
            font-size: 13px;
        }

        .legend-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 6px 0;
            white-space: nowrap;
        }

        .legend-swatch {
            flex: 0 0 auto;
            display: inline-block;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 999px;
            border: 2px solid rgba(255, 255, 255, 0.95);
            box-sizing: border-box;
        }

        .legend-area {
            width: 18px;
            height: 12px;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .legend-note {
            margin-top: 8px;
            opacity: 0.85;
            font-size: 12px;
            line-height: 16px;
            white-space: normal;
        }

        @media (max-width: 750px) {
            .map-legend {
                left: 10px;
                right: 10px;
                bottom: 96px;
                max-width: none;
            }
        }
    </style>
</head>

<body>
    
    <div id="navbar"></div>

    <div id="map"></div>

    <div id="legend" class="map-legend" role="region" aria-label="Map legend">
        <p class="map-legend-title">Map legend</p>
        <div class="legend-row">
            <span class="legend-swatch legend-dot" style="background:#ffd400;"></span>
            <span>Deaths / missing (yellow dots)</span>
        </div>
        <div class="legend-row">
            <span class="legend-swatch legend-dot" style="background:#ff5e00;"></span>
            <span>Case locations (click to open story)</span>
        </div>
        <div class="legend-row">
            <span class="legend-swatch legend-area" style="background: rgba(255, 140, 0, 0.18); border: 2px solid rgba(255, 140, 0, 0.95);"></span>
            <span>SAR / SRR regions (shaded areas + boundary lines)</span>
        </div>
        <div class="legend-note">
            Tip: if the deaths dots in the basemap use a different yellow, update the legend color to match.
        </div>
    </div>

    <div id="story">
        <div id="features">
            <div id="home-info" class="step active lefty">
                <div class="dark">
                    <h2>The Treacherous Journey</h2>
                    <p><strong>Every year, tens of thousands of people attempt the sea crossing to Europe in small, overcrowded boats.</strong> In 2024, UNHCR recorded about 199,400 arrivals to Europe by sea, and about 3,580 people dead or missing along the Mediterranean and West Africa Atlantic routes. Many deaths are never witnessed or confirmed, so any total is likely an undercount (United Nations High Commissioner for Refugees, 2026).</p>
                    <p>This map introduces the first chapter of our project: the treacherous journey across the Mediterranean Sea and the hostile borders that meet those who cross it. It shows the main maritime corridor and the Search and Rescue (SAR) regions that divide responsibility for coordinating rescues. These boundaries influence who is expected to respond, how fast help arrives, and where survivors are taken.</p>
                    <p>We focus on three cases in which injustice was caused by the abuse of authority by coast guards, delayed rescue efforts, or failures to treat situations as SAR priorities, cases that raise questions about duty, accountability, and responsibility at sea.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="footer" class="dark">
        <p style="margin:0;">
            SAR = Search and Rescue. SRR = Search and Rescue Region (the area a state is responsible for coordinating rescue).<br>
            SAR zones/SRR boundaries are shown as shaded regions (from the <a href="https://gisis.imo.org/Public/" target="_blank" rel="noopener noreferrer">IMO GISIS</a> Global SAR Plan).<br>
        </p>
    </div>

    <script>
        // Base path support:
        // - Local/static servers:   http://localhost:3001/...
        // - Vercel with rewrites:   http://<host>/Migrants-at-sea-mapbox/...
        (function initSiteBase() {
            const prefix = '/Migrants-at-sea-mapbox';
            window.SITE_BASE = window.location.pathname.startsWith(prefix) ? prefix : '';
        })();
    </script>
    <script src="./config.js"></script>

    <script>
        (async function initHome() {
            function positionLegendAboveFooter() {
                const legend = document.getElementById('legend');
                const footer = document.getElementById('footer');
                if (!legend || !footer) return;

                // Place legend above the fixed footer with a small gap.
                const footerH = footer.getBoundingClientRect().height || 0;
                const gap = 14;
                legend.style.bottom = `${Math.max(10, Math.round(footerH + gap))}px`;
            }

            function applyBaseToAnchors(rootEl) {
                const base = window.SITE_BASE || '';
                if (!base || !rootEl) return;
                rootEl.querySelectorAll('a[href^="/"]').forEach(a => {
                    const href = a.getAttribute('href');
                    if (!href) return;
                    if (href.startsWith(base + '/')) return;
                    a.setAttribute('href', base + href);
                });
            }

            // Keep legend clear of the fixed footer (handles wrapping/responsive layouts).
            positionLegendAboveFooter();
            window.addEventListener('resize', () => requestAnimationFrame(positionLegendAboveFooter), { passive: true });

            // Load navbar component (best-effort)
            try {
                const res = await fetch(window.SITE_BASE + '/components/navbar');
                const navbarEl = document.getElementById('navbar');
                navbarEl.innerHTML = await res.text();
                applyBaseToAnchors(navbarEl);
            } catch (e) {
                console.warn('Navbar failed to load:', e);
            }

            const cfg = window.HOME_CONFIG;
            if (!cfg || !cfg.accessToken) {
                throw new Error('Missing HOME_CONFIG in ./config.js');
            }

            mapboxgl.accessToken = cfg.accessToken;

            const map = new mapboxgl.Map({
                container: 'map',
                style: cfg.style,
                center: cfg.initialView.center,
                zoom: cfg.initialView.zoom,
                bearing: cfg.initialView.bearing || 0,
                pitch: cfg.initialView.pitch || 0,
                projection: cfg.projection || 'mercator'
            });

            map.addControl(new mapboxgl.NavigationControl(), 'top-right');
            if (cfg.inset) {
                map.addControl(
                    new GlobeMinimap({ ...(cfg.insetOptions || {}) }),
                    cfg.insetPosition || 'bottom-right'
                );
            }

            map.on('load', () => {
                // Insert SAR layers just *below* the land fill layer when possible.
                // This visually "clips" SAR areas to water because land is rendered above.
                const styleLayers = (map.getStyle() && map.getStyle().layers) ? map.getStyle().layers : [];
                const landFillLayer = styleLayers.find(l =>
                    l &&
                    l.type === 'fill' &&
                    (
                        (typeof l.id === 'string' && l.id.toLowerCase().includes('land')) ||
                        (typeof l['source-layer'] === 'string' && l['source-layer'].toLowerCase().includes('land'))
                    )
                );
                const sarBeforeId = landFillLayer ? landFillLayer.id : undefined;

                // --- SAR zones ---
                map.addSource('sar-zones', { type: 'geojson', data: cfg.sarZonesUrl });

                map.addLayer({
                    id: 'sar-fill',
                    type: 'fill',
                    source: 'sar-zones',
                    // Exclude Greece SRR here; it will be loaded from its combined GeoJSON below.
                    filter: ['all',
                        ['!=', ['get', 'country'], 'Greece'],
                        ['!=', ['get', 'country'], 'Italy'],
                        ['!=', ['get', 'country'], 'Malta'],
                        ['!=', ['get', 'country'], 'Tunisia'],
                        ['!=', ['get', 'country'], 'Libya'],
                        ['!=', ['get', 'country'], 'Egypt']
                    ],
                    paint: {
                        'fill-color': ['coalesce', ['get', 'fill'], '#ff8c00'],
                        'fill-opacity': ['coalesce', ['get', 'fill-opacity'], 0.14]
                    }
                }, sarBeforeId);

                map.addLayer({
                    id: 'sar-outline',
                    type: 'line',
                    source: 'sar-zones',
                    filter: ['all',
                        ['!=', ['get', 'country'], 'Greece'],
                        ['!=', ['get', 'country'], 'Italy'],
                        ['!=', ['get', 'country'], 'Malta'],
                        ['!=', ['get', 'country'], 'Tunisia'],
                        ['!=', ['get', 'country'], 'Libya'],
                        ['!=', ['get', 'country'], 'Egypt']
                    ],
                    paint: {
                        'line-color': ['coalesce', ['get', 'stroke'], '#ff8c00'],
                        'line-width': ['coalesce', ['get', 'stroke-width'], 2],
                        'line-opacity': 0.95
                    }
                }, sarBeforeId);

                map.addLayer({
                    id: 'sar-labels',
                    type: 'symbol',
                    source: 'sar-zones',
                    filter: ['all',
                        ['!=', ['get', 'country'], 'Greece'],
                        ['!=', ['get', 'country'], 'Italy'],
                        ['!=', ['get', 'country'], 'Malta'],
                        ['!=', ['get', 'country'], 'Tunisia'],
                        ['!=', ['get', 'country'], 'Libya'],
                        ['!=', ['get', 'country'], 'Egypt']
                    ],
                    layout: {
                        'text-field': ['format', ['get', 'name'], { 'font-scale': 1.0 }, '\n', ['get', 'authority'], { 'font-scale': 0.8 }],
                        'text-size': 12,
                        'text-font': ['DIN Pro Medium', 'Arial Unicode MS Regular'],
                        'text-anchor': 'center'
                    },
                    paint: {
                        'text-color': '#1a1a1a',
                        'text-halo-color': '#ffffff',
                        'text-halo-width': 1.2
                    }
                }, sarBeforeId);

                // --- Greece SRR (combined) ---
                if (cfg.greeceSrrUrl) {
                    map.addSource('greece-srr', { type: 'geojson', data: cfg.greeceSrrUrl });

                    map.addLayer({
                        id: 'greece-srr-fill',
                        type: 'fill',
                        source: 'greece-srr',
                        paint: {
                            'fill-color': ['coalesce', ['get', 'fill'], '#33a02c'],
                            'fill-opacity': ['coalesce', ['get', 'fill-opacity'], 0.25]
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'greece-srr-outline',
                        type: 'line',
                        source: 'greece-srr',
                        paint: {
                            'line-color': ['coalesce', ['get', 'stroke'], '#33a02c'],
                            'line-width': ['coalesce', ['get', 'stroke-width'], 2],
                            'line-opacity': 0.95
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'greece-srr-labels',
                        type: 'symbol',
                        source: 'greece-srr',
                        layout: {
                            'text-field': ['format', 'Greece SRR', { 'font-scale': 1.0 }, '\n', ['get', 'authority'], { 'font-scale': 0.8 }],
                            'text-size': 12,
                            'text-font': ['DIN Pro Medium', 'Arial Unicode MS Regular'],
                            'text-anchor': 'center'
                        },
                        paint: {
                            'text-color': '#1a1a1a',
                            'text-halo-color': '#ffffff',
                            'text-halo-width': 1.2
                        }
                    }, sarBeforeId);
                }

                // --- Italy SRR (combined) ---
                if (cfg.italySrrUrl) {
                    map.addSource('italy-srr', { type: 'geojson', data: cfg.italySrrUrl });

                    map.addLayer({
                        id: 'italy-srr-fill',
                        type: 'fill',
                        source: 'italy-srr',
                        paint: {
                            'fill-color': ['coalesce', ['get', 'fill'], '#ff8c00'],
                            'fill-opacity': ['coalesce', ['get', 'fill-opacity'], 0.14]
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'italy-srr-outline',
                        type: 'line',
                        source: 'italy-srr',
                        paint: {
                            'line-color': ['coalesce', ['get', 'stroke'], '#ff8c00'],
                            'line-width': ['coalesce', ['get', 'stroke-width'], 2],
                            'line-opacity': 0.95
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'italy-srr-labels',
                        type: 'symbol',
                        source: 'italy-srr',
                        layout: {
                            'text-field': ['format', 'Italy SRR', { 'font-scale': 1.0 }, '\n', ['get', 'authority'], { 'font-scale': 0.8 }],
                            'text-size': 12,
                            'text-font': ['DIN Pro Medium', 'Arial Unicode MS Regular'],
                            'text-anchor': 'center'
                        },
                        paint: {
                            'text-color': '#1a1a1a',
                            'text-halo-color': '#ffffff',
                            'text-halo-width': 1.2
                        }
                    }, sarBeforeId);
                }

                // --- Malta SRR ---
                if (cfg.maltaSrrUrl) {
                    map.addSource('malta-srr', { type: 'geojson', data: cfg.maltaSrrUrl });

                    map.addLayer({
                        id: 'malta-srr-fill',
                        type: 'fill',
                        source: 'malta-srr',
                        paint: {
                            'fill-color': ['coalesce', ['get', 'fill'], '#ff8c00'],
                            'fill-opacity': ['coalesce', ['get', 'fill-opacity'], 0.14]
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'malta-srr-outline',
                        type: 'line',
                        source: 'malta-srr',
                        paint: {
                            'line-color': ['coalesce', ['get', 'stroke'], '#ff8c00'],
                            'line-width': ['coalesce', ['get', 'stroke-width'], 2],
                            'line-opacity': 0.95
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'malta-srr-labels',
                        type: 'symbol',
                        source: 'malta-srr',
                        layout: {
                            'text-field': ['format', 'Malta SRR', { 'font-scale': 1.0 }, '\n', ['get', 'authority'], { 'font-scale': 0.8 }],
                            'text-size': 12,
                            'text-font': ['DIN Pro Medium', 'Arial Unicode MS Regular'],
                            'text-anchor': 'center'
                        },
                        paint: {
                            'text-color': '#1a1a1a',
                            'text-halo-color': '#ffffff',
                            'text-halo-width': 1.2
                        }
                    }, sarBeforeId);
                }

                // --- Tunisia SRR ---
                if (cfg.tunisiaSrrUrl) {
                    map.addSource('tunisia-srr', { type: 'geojson', data: cfg.tunisiaSrrUrl });

                    map.addLayer({
                        id: 'tunisia-srr-fill',
                        type: 'fill',
                        source: 'tunisia-srr',
                        paint: {
                            'fill-color': ['coalesce', ['get', 'fill'], '#ff8c00'],
                            'fill-opacity': ['coalesce', ['get', 'fill-opacity'], 0.14]
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'tunisia-srr-outline',
                        type: 'line',
                        source: 'tunisia-srr',
                        paint: {
                            'line-color': ['coalesce', ['get', 'stroke'], '#ff8c00'],
                            'line-width': ['coalesce', ['get', 'stroke-width'], 2],
                            'line-opacity': 0.95
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'tunisia-srr-labels',
                        type: 'symbol',
                        source: 'tunisia-srr',
                        layout: {
                            'text-field': ['format', 'Tunisia SRR', { 'font-scale': 1.0 }, '\n', ['get', 'authority'], { 'font-scale': 0.8 }],
                            'text-size': 12,
                            'text-font': ['DIN Pro Medium', 'Arial Unicode MS Regular'],
                            'text-anchor': 'center'
                        },
                        paint: {
                            'text-color': '#1a1a1a',
                            'text-halo-color': '#ffffff',
                            'text-halo-width': 1.2
                        }
                    }, sarBeforeId);
                }

                // --- Libya SRR ---
                if (cfg.libyaSrrUrl) {
                    map.addSource('libya-srr', { type: 'geojson', data: cfg.libyaSrrUrl });

                    map.addLayer({
                        id: 'libya-srr-fill',
                        type: 'fill',
                        source: 'libya-srr',
                        paint: {
                            'fill-color': ['coalesce', ['get', 'fill'], '#ff8c00'],
                            'fill-opacity': ['coalesce', ['get', 'fill-opacity'], 0.14]
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'libya-srr-outline',
                        type: 'line',
                        source: 'libya-srr',
                        paint: {
                            'line-color': ['coalesce', ['get', 'stroke'], '#ff8c00'],
                            'line-width': ['coalesce', ['get', 'stroke-width'], 2],
                            'line-opacity': 0.95
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'libya-srr-labels',
                        type: 'symbol',
                        source: 'libya-srr',
                        layout: {
                            'text-field': ['format', 'Libya SRR', { 'font-scale': 1.0 }, '\n', ['get', 'authority'], { 'font-scale': 0.8 }],
                            'text-size': 12,
                            'text-font': ['DIN Pro Medium', 'Arial Unicode MS Regular'],
                            'text-anchor': 'center'
                        },
                        paint: {
                            'text-color': '#1a1a1a',
                            'text-halo-color': '#ffffff',
                            'text-halo-width': 1.2
                        }
                    }, sarBeforeId);
                }

                // --- Egypt SRR ---
                if (cfg.egyptSrrUrl) {
                    map.addSource('egypt-srr', { type: 'geojson', data: cfg.egyptSrrUrl });

                    map.addLayer({
                        id: 'egypt-srr-fill',
                        type: 'fill',
                        source: 'egypt-srr',
                        paint: {
                            'fill-color': ['coalesce', ['get', 'fill'], '#ff8c00'],
                            'fill-opacity': ['coalesce', ['get', 'fill-opacity'], 0.14]
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'egypt-srr-outline',
                        type: 'line',
                        source: 'egypt-srr',
                        paint: {
                            'line-color': ['coalesce', ['get', 'stroke'], '#ff8c00'],
                            'line-width': ['coalesce', ['get', 'stroke-width'], 2],
                            'line-opacity': 0.95
                        }
                    }, sarBeforeId);

                    map.addLayer({
                        id: 'egypt-srr-labels',
                        type: 'symbol',
                        source: 'egypt-srr',
                        layout: {
                            'text-field': ['format', 'Egypt SRR', { 'font-scale': 1.0 }, '\n', ['get', 'authority'], { 'font-scale': 0.8 }],
                            'text-size': 12,
                            'text-font': ['DIN Pro Medium', 'Arial Unicode MS Regular'],
                            'text-anchor': 'center'
                        },
                        paint: {
                            'text-color': '#1a1a1a',
                            'text-halo-color': '#ffffff',
                            'text-halo-width': 1.2
                        }
                    }, sarBeforeId);
                }

                // --- Case markers (click to open story) ---
                const base = window.SITE_BASE || '';
                const withBase = (url) => (typeof url === 'string' && url.startsWith('/') ? base + url : url);
                const casesFC = {
                    type: 'FeatureCollection',
                    features: (cfg.cases || []).map(c => ({
                        type: 'Feature',
                        properties: { title: c.title, url: withBase(c.url) },
                        geometry: { type: 'Point', coordinates: c.coordinates }
                    }))
                };

                map.addSource('cases', { type: 'geojson', data: casesFC });

                map.addLayer({
                    id: 'cases-circle',
                    type: 'circle',
                    source: 'cases',
                    paint: {
                        'circle-radius': 7,
                        'circle-color': '#ff5e00',
                        'circle-stroke-color': '#ffffff',
                        'circle-stroke-width': 2,
                        'circle-opacity': 0.95
                    }
                });

                map.addLayer({
                    id: 'cases-label',
                    type: 'symbol',
                    source: 'cases',
                    layout: {
                        'text-field': ['get', 'title'],
                        'text-size': 12,
                        'text-offset': [0, 1.2],
                        'text-anchor': 'top'
                    },
                    paint: {
                        'text-color': '#111',
                        'text-halo-color': '#fff',
                        'text-halo-width': 1.2
                    }
                });

                function openCasePopup(e) {
                    const f = e.features && e.features[0];
                    if (!f) return;
                    const html = `<strong>${f.properties.title}</strong><br><a href="${f.properties.url}">Open story</a>`;
                    new mapboxgl.Popup()
                        .setLngLat(f.geometry.coordinates)
                        .setHTML(html)
                        .addTo(map);
                }

                map.on('click', 'cases-circle', openCasePopup);
                map.on('click', 'cases-label', openCasePopup);

                map.on('mouseenter', 'cases-circle', () => (map.getCanvas().style.cursor = 'pointer'));
                map.on('mouseleave', 'cases-circle', () => (map.getCanvas().style.cursor = ''));
                map.on('mouseenter', 'cases-label', () => (map.getCanvas().style.cursor = 'pointer'));
                map.on('mouseleave', 'cases-label', () => (map.getCanvas().style.cursor = ''));
            });
        })();
    </script>

</body>

</html>